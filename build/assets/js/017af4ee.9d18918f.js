"use strict";(self.webpackChunkdocs_changeset_io=self.webpackChunkdocs_changeset_io||[]).push([[147],{3905:(e,t,o)=>{o.d(t,{Zo:()=>d,kt:()=>h});var a=o(7294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,a,n=function(e,t){if(null==e)return{};var o,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var l=a.createContext({}),c=function(e){var t=a.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},d=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},f=a.forwardRef((function(e,t){var o=e.components,n=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=c(o),f=n,h=p["".concat(l,".").concat(f)]||p[f]||u[f]||r;return o?a.createElement(h,i(i({ref:t},d),{},{components:o})):a.createElement(h,i({ref:t},d))}));function h(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=o.length,i=new Array(r);i[0]=f;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:n,i[1]=s;for(var c=2;c<r;c++)i[c]=o[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,o)}f.displayName="MDXCreateElement"},7724:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var a=o(7462),n=(o(7294),o(3905));const r={sidebar_position:1},i="Create a Workflow",s={unversionedId:"workflows/create-a-workflow",id:"workflows/create-a-workflow",title:"Create a Workflow",description:"Workflows are how pull requests are connected to specific actions in Changeset. Assuming you have connected a repository,",source:"@site/docs/workflows/create-a-workflow.md",sourceDirName:"workflows",slug:"/workflows/create-a-workflow",permalink:"/docs/workflows/create-a-workflow",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/workflows/create-a-workflow.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Workflows",permalink:"/docs/category/workflows"}},l={},c=[{value:"Create Your First Workflow",id:"create-your-first-workflow",level:2},{value:"Name the Workflow",id:"name-the-workflow",level:2},{value:"Subscribe to Events",id:"subscribe-to-events",level:2},{value:"Custom Attributes",id:"custom-attributes",level:2},{value:"Adding Conditions",id:"adding-conditions",level:2},{value:"Specifying an Action",id:"specifying-an-action",level:2}],d={toc:c};function p(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,a.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"create-a-workflow"},"Create a Workflow"),(0,n.kt)("p",null,"Workflows are how pull requests are connected to specific actions in Changeset. Assuming you have connected a repository,\ncreating a workflow can be accomplished via the workflow editor."),(0,n.kt)("h2",{id:"create-your-first-workflow"},"Create Your First Workflow"),(0,n.kt)("p",null,'From the repository overview page, select "New Workflow"'),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"New Workflow Button",src:o(3662).Z,width:"1602",height:"804"})),(0,n.kt)("h2",{id:"name-the-workflow"},"Name the Workflow"),(0,n.kt)("p",null,'Give the workflow a memorable name. It helps to be descriptive, like "Alert when updating legacy code"'),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Name the workflow",src:o(8646).Z,width:"3018",height:"1729"})),(0,n.kt)("h2",{id:"subscribe-to-events"},"Subscribe to Events"),(0,n.kt)("p",null,'Each option corresponds to an event that may occur in an open pull request, and selecting one assigns this workflow to be evaluated when the event occurs. For example, selecting only "approved" would result in this workflow being run whenever a pull request is approved. '),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Subsribe to events",src:o(274).Z,width:"2970",height:"1713"})),(0,n.kt)("h2",{id:"custom-attributes"},"Custom Attributes"),(0,n.kt)("p",null,"Sometimes a workflow requires looking at a specific file in a pull request, or checking that some specific item in a list matches a condition. You can use custom attributes to apply maps, filters, and functions to achieve this behavior in workflows. In this example, we'll create a custom attribute called ",(0,n.kt)("inlineCode",{parentName:"p"},"all javascript files")," that can be used later when creating conditions."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Select 'Create Custom Attribute'")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Create custom attribute",src:o(9533).Z,width:"2812",height:"642"})),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"Choose an attribute to customize")),(0,n.kt)("p",null,"Only pull request attributes that are lists of objects can be filtered and customized. Here we have chosen ",(0,n.kt)("inlineCode",{parentName:"p"},"files")," so that we can filter the attribute down further."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Custom attr",src:o(44).Z,width:"2836",height:"680"})),(0,n.kt)("ol",{start:3},(0,n.kt)("li",{parentName:"ol"},"Give the custom attribute a name")),(0,n.kt)("p",null,"You'll be able to refer to the name later when creating conditions to check before this workflow's actions fire."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Custom attr name",src:o(3677).Z,width:"2836",height:"680"})),(0,n.kt)("ol",{start:4},(0,n.kt)("li",{parentName:"ol"},"Add maps, filters, and functions to modify the attribute")),(0,n.kt)("p",null,"Adding a ",(0,n.kt)("inlineCode",{parentName:"p"},"filter")," allows you to look only at items in a list that match a specific criteria. Here we'll filter the ",(0,n.kt)("inlineCode",{parentName:"p"},"files")," attribute down to only the files that ",(0,n.kt)("inlineCode",{parentName:"p"},"include")," ",(0,n.kt)("inlineCode",{parentName:"p"},".js")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"zerofilters",src:o(4650).Z,width:"2798",height:"602"})),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"addfilter",src:o(416).Z,width:"2798",height:"602"})),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"value",src:o(9955).Z,width:"2766",height:"810"})),(0,n.kt)("h2",{id:"adding-conditions"},"Adding Conditions"),(0,n.kt)("p",null,"Conditions are what determine whether or not the workflow's actions will be ran. Using our custom attribute ",(0,n.kt)("inlineCode",{parentName:"p"},"all javascript files")," as an example, perhaps we want to make sure that no one modifies a file called ",(0,n.kt)("inlineCode",{parentName:"p"},"dont-touch.js"),"."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Add a new condition")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"add condition",src:o(7266).Z,width:"2798",height:"534"})),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"Use the attribute dropdown to find an attribute to test against")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"select attribute",src:o(8464).Z,width:"2798",height:"502"})),(0,n.kt)("ol",{start:3},(0,n.kt)("li",{parentName:"ol"},"Choose an operator and specify a value")),(0,n.kt)("p",null,"The operator in this case is ",(0,n.kt)("inlineCode",{parentName:"p"},"includes")," since we're testing a list for inclusion, but other attributes have other operators like ",(0,n.kt)("inlineCode",{parentName:"p"},"equals"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"greater than")," etc."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"operator",src:o(7756).Z,width:"2798",height:"502"})),(0,n.kt)("h2",{id:"specifying-an-action"},"Specifying an Action"),(0,n.kt)("p",null,"When an event that your workflow is subscribed to is fired, Changeset will check your conditions to see if the workflow's actions need to be ran. If the condition check passes, an action is the final step of the workflow. There are several actions to choose from, but in this case, we'll leave a comment on the pull request warning the user that they've touched a forbidden file"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Use the input and select the ",(0,n.kt)("inlineCode",{parentName:"li"},"Add a comment to the pull request")," action")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"action",src:o(988).Z,width:"2798",height:"836"})),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"Use the pencil icon to edit the action options")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"edit action",src:o(1258).Z,width:"2798",height:"510"})),(0,n.kt)("ol",{start:3},(0,n.kt)("li",{parentName:"ol"},"Specify the markdown to send in the comment")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"edit markdown",src:o(1457).Z,width:"2798",height:"1432"})))}p.isMDXComponent=!0},988:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/action-fe3e389111ef9febcdc317977adb9af3.png"},7266:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/addcondition-30784dd7db93e7c31043f7d8581f38ed.png"},416:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/addfilter-48c824174c84dc4b657b3c7b9969c662.png"},44:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/choose-attr-adf11cab7897658a1c28a59f0c558424.png"},9533:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/custom-button-585d45facb3a857391ca3beec47d4c93.png"},1258:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/editaction-aa54839d7d323e9cb8f4bb00896c220f.png"},274:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/events-d01f2d0a06260eb2bc4a0e6003c3db9e.png"},9955:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/filtervalue-7ca92cf31a867692afcdeb6c6c835d10.png"},1457:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/md-7dbeafe2e2d8c988f61ec73aa5e6f0a8.png"},3677:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/name-attr-a4cf24da690a72a8209cc31629d7eff2.png"},7756:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/operator-ff50a7b72d0903ef915ee06e805ef9ba.png"},8464:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/searchattrs-00ae4490e653d27df557ba73a6f4ab0e.png"},3662:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/workflow-button-49b01f62a8461488e07faf26723adf99.png"},8646:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/workflow-name-1e1e42bfd4e8203610ce15365675cedc.png"},4650:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/zerofilters-ca52c1d033401d76efe898730c7be699.png"}}]);